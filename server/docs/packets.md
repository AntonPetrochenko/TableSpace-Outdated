# Протокол данных TableSpace

## Формат данных

Данные передаются в формате JSON спомощью соединения WebSocket. Первый элемент каждого пакета описывает тип данного пакета.

## Описание пакетов

### Исходящие с сервера

#### "HELO!" - Установление соединения

Данный пакет содержит все данные, необходимые клиентскому приложению для воссоздания состояния стола локально:

- Массив данных о столе
  - Список уже подключенных клиентов с их идентификаторами, цветами курсоров
  - TODO: Список объектов на столе
- TODO: Права доступа пользователя

#### "UserJoin" - Вход нового пользователя

Данный пакет содержит данные о новом пользователе, подключившемся к серверу

- Массив данных о пользователе
  - Идентификатор пользователя
  - TODO: Больше вещей

#### "CursorMove" - Пользователь переместил курсор

TODO: Данный пакет не отправляется для пользователей, курсор которых глобально скрыт

- Идентификатор пользователя, переместившего курсор
- Массив из двух элементов - X и Y курсора

#### "ChatMessage" - Пользователь отправил сообщение в чат

Содержит одну строку - сообщение

### Исходящие с клиента

#### "CursorMove" - Перемещение курсора

TODO: У клиента, курсор которого глобально скрыт, могут вежливо попросить не отсылать этот пакет

- Массив из двух элементов - X и Y курсора

#### "ChatMessage" - Пользователь отправил сообщение в чат

Содержит одну строку - сообщение